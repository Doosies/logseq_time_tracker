---
name: task-decomposition
description: 복잡한 태스크를 서브태스크로 분해
---

# 태스크 분해

이 Skill은 워크플로우 관리자가 복잡한 태스크를 관리 가능한 서브태스크로 분해하는 방법을 제공합니다.

## 분해 기준

### 복잡한 태스크의 특징
- 5개 이상 파일 수정
- 3개 이상 서브에이전트 필요
- 여러 기능이 결합된 요청
- 예상 시간 30분 이상

---

## 분해 프로세스

### 1단계: 요구사항 파악

```markdown
사용자 요청: "사용자 인증 전체 시스템 구축"

분석:
- 회원가입
- 로그인
- 로그아웃
- 토큰 갱신
- 비밀번호 재설정?
- 이메일 검증?

→ 복잡도: 높음 (4-6개 기능)
```

### 2단계: 핵심 기능 추출

```markdown
핵심 기능 (Must Have):
1. 회원가입
2. 로그인
3. 로그아웃
4. 토큰 갱신

추가 기능 (Nice to Have):
5. 비밀번호 재설정
6. 이메일 검증
```

### 3단계: 서브태스크 정의

```markdown
서브태스크 1: 사용자 모델 및 DB 스키마
- User 모델 정의
- DB 마이그레이션
- 예상: 20분

서브태스크 2: 회원가입 API
- POST /api/auth/register
- 이메일 중복 체크
- 비밀번호 해싱
- 예상: 30분

서브태스크 3: 로그인 API
- POST /api/auth/login
- JWT 토큰 생성
- 세션 관리
- 예상: 30분

서브태스크 4: 로그아웃 API
- POST /api/auth/logout
- 세션 무효화
- 예상: 15분

서브태스크 5: 토큰 갱신 API
- POST /api/auth/refresh
- 리프레시 토큰 검증
- 예상: 25분
```

---

## 분해 패턴

### 패턴 1: 수직 분해 (레이어별)

**적용 시**: 전체 스택 구현

```markdown
서브태스크 1: 데이터 레이어
- 모델 정의
- DB 스키마

서브태스크 2: 서비스 레이어
- 비즈니스 로직
- 유효성 검증

서브태스크 3: API 레이어
- 컨트롤러
- 라우팅

서브태스크 4: 테스트
- 단위 테스트
- 통합 테스트

서브태스크 5: 문서화
- API 문서
- README
```

### 패턴 2: 수평 분해 (기능별)

**적용 시**: 독립적인 기능들

```markdown
서브태스크 1: 회원가입 기능
- API + Service + Model + Tests

서브태스크 2: 로그인 기능
- API + Service + Model + Tests

서브태스크 3: 로그아웃 기능
- API + Service + Tests
```

### 패턴 3: 의존성 기반 분해

**적용 시**: 순차 의존성 있음

```markdown
서브태스크 1: 기본 인프라 (필수 우선)
- User 모델
- DB 연결
- 설정 파일

서브태스크 2: 인증 핵심 (1에 의존)
- 회원가입
- 로그인

서브태스크 3: 인증 확장 (2에 의존)
- 토큰 갱신
- 로그아웃

서브태스크 4: 추가 기능 (2에 의존)
- 비밀번호 재설정
- 이메일 검증
```

---

## 서브태스크 템플릿

```markdown
## 서브태스크 [번호]: [제목]

### 설명
[무엇을 하는 서브태스크인지]

### 입력
- [필요한 입력/의존성]

### 출력
- [생성될 파일/결과물]

### 에이전트
- [사용할 에이전트들]

### 예상 시간
[분/시간]

### 의존성
- 선행: [이 작업 전에 완료되어야 할 것]
- 후행: [이 작업 후에 가능한 것]

### 완료 조건
- [ ] [조건 1]
- [ ] [조건 2]
```

---

## 예시: 사용자 인증 시스템

### 전체 분해

```markdown
# 태스크: 사용자 인증 시스템 구축

## 서브태스크 1: User 모델 및 DB

### 설명
사용자 데이터 모델과 데이터베이스 스키마 정의

### 입력
- 요구사항: 이메일, 비밀번호, 이름, 생성일

### 출력
- src/models/user.ts
- migrations/001_create_users.sql

### 에이전트
- 기획 → 구현

### 예상 시간
20분

### 의존성
- 선행: 없음
- 후행: 서브태스크 2, 3

### 완료 조건
- [ ] User 인터페이스 정의
- [ ] DB 마이그레이션 스크립트
- [ ] Linter 오류 0개

---

## 서브태스크 2: 회원가입 API

### 설명
이메일/비밀번호 회원가입 구현

### 입력
- User 모델 (서브태스크 1)
- 요구사항: POST /api/auth/register

### 출력
- src/api/controllers/auth-controller.ts (register 함수)
- src/services/auth-service.ts
- tests/auth.test.ts (회원가입 테스트)

### 에이전트
- 구현 → QA

### 예상 시간
30분

### 의존성
- 선행: 서브태스크 1
- 후행: 없음 (독립적)

### 완료 조건
- [ ] POST /api/auth/register 작동
- [ ] 이메일 중복 체크
- [ ] 비밀번호 해싱 (bcrypt)
- [ ] 테스트 통과 (10개)
- [ ] 커버리지 85%+

---

## 서브태스크 3: 로그인 API

### 설명
이메일/비밀번호 로그인 및 JWT 발급

### 입력
- User 모델 (서브태스크 1)
- 요구사항: POST /api/auth/login

### 출력
- src/api/controllers/auth-controller.ts (login 함수)
- src/services/token-service.ts
- tests/auth.test.ts (로그인 테스트)

### 에이전트
- 구현 → QA

### 예상 시간
30분

### 의존성
- 선행: 서브태스크 1
- 후행: 서브태스크 4, 5

### 완료 조건
- [ ] POST /api/auth/login 작동
- [ ] JWT 토큰 생성
- [ ] 비밀번호 검증
- [ ] 테스트 통과
- [ ] 커버리지 85%+

---

## 서브태스크 4: 로그아웃 API

### 설명
세션 무효화

### 입력
- JWT 토큰 시스템 (서브태스크 3)

### 출력
- src/api/controllers/auth-controller.ts (logout 함수)
- tests/auth.test.ts (로그아웃 테스트)

### 에이전트
- 구현 → QA

### 예상 시간
15분

### 의존성
- 선행: 서브태스크 3
- 후행: 없음

### 완료 조건
- [ ] POST /api/auth/logout 작동
- [ ] 세션 무효화
- [ ] 테스트 통과

---

## 서브태스크 5: 토큰 갱신 API

### 설명
리프레시 토큰으로 액세스 토큰 갱신

### 입력
- JWT 토큰 시스템 (서브태스크 3)

### 출력
- src/api/controllers/auth-controller.ts (refresh 함수)
- tests/auth.test.ts (갱신 테스트)

### 에이전트
- 구현 → QA

### 예상 시간
25분

### 의존성
- 선행: 서브태스크 3
- 후행: 없음

### 완료 조건
- [ ] POST /api/auth/refresh 작동
- [ ] 리프레시 토큰 검증
- [ ] 새 액세스 토큰 발급
- [ ] 테스트 통과
```

---

## 분해 품질 기준

### 좋은 분해
- [ ] 각 서브태스크가 독립적
- [ ] 의존성이 명확
- [ ] 완료 조건이 구체적
- [ ] 예상 시간이 현실적
- [ ] 병렬 실행 가능한 것 식별

### 나쁜 분해
- ❌ 서브태스크가 너무 큼 (2시간+)
- ❌ 서브태스크가 너무 작음 (5분 이하)
- ❌ 의존성이 순환
- ❌ 완료 조건 모호

---

## 완료 기준

- [ ] 서브태스크 3개 이상 정의
- [ ] 각 서브태스크 독립적
- [ ] 의존성 명확
- [ ] 완료 조건 구체적
- [ ] 총 예상 시간 산출
